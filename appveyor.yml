version: 1.0.{build}
skip_branch_with_pr: true
image: Visual Studio 2017
assembly_info:
  patch: true
  file: '**\AssemblyInfo.*'
  assembly_version: '{version}'
  assembly_file_version: '{version}'
  assembly_informational_version: '{version}'
dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '{version}'
  package_version: '{version}'
  assembly_version: '{version}'
  file_version: '{version}'
  informational_version: '{version}'
environment:
  solution_version: 1.0.0
cache:
  - packages -> **\packages.config
install:
- cmd: appveyor DownloadFile https://dist.nuget.org/win-x86-commandline/v4.9.2/nuget.exe
before_build:
- cmd: >-
    dotnet --version

    dotnet restore ./src/P7Core.ObjectCaches.sln --verbosity m
build:
  verbosity: minimal
after_build:
- cmd: dotnet pack  ./src/P7Core.ObjectCaches.sln -c Release /p:PackageVersion=%APPVEYOR_BUILD_VERSION% --include-symbols
artifacts:
- path: '**\*.nupkg'
  name: nuget
